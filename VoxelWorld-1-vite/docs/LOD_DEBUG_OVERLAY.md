# LOD Debug Overlay

Visual debugging tool for the LOD (Level of Detail) system.

## Usage

**Press `L` key** to toggle the debug overlay on/off.

## What It Shows

### 1. Colored Rings (Visual Boundaries)

- **🟢 Green Ring**: Tier 0 boundary (full detail interactive chunks)
  - Distance: 0 to `renderDistance * chunkSize` blocks
  - Example: renderDistance=3, chunkSize=8 → 0-24 blocks

- **🟡 Yellow Ring**: Tier 1 boundary (simplified LOD chunks)
  - Distance: `renderDistance` to `(renderDistance + visualDistance) * chunkSize` blocks
  - Example: renderDistance=3, visualDistance=1 → 24-32 blocks

- **🔴 Red Ring**: Tier 2 boundary (billboards - not yet implemented)
  - Distance: Beyond `(renderDistance + visualDistance) * chunkSize` blocks
  - Future feature for ultra-distant terrain

The rings follow the player as they move through the world.

### 2. Stats Display (Top Right)

Real-time performance metrics:

```
🟢 TIER 0 (Full Detail)
  Distance: 0-24m
  Chunks: 49
  Blocks: 12,543

🟡 TIER 1 (Simplified)
  Distance: 24-32m
  Chunks: 12
  Meshes: 36

🔴 TIER 2 (Billboards)
  Status: Not Implemented
  Distance: 32m+

━━━━━━━━━━━━━━━━━━
  Render Dist: 3 chunks
  Visual Dist: +1 chunks
  Chunk Size: 8 blocks
```

## Understanding the Metrics

### Tier 0 (Full Detail)
- **Chunks**: Number of fully-loaded interactive chunks
- **Blocks**: Total individual blocks rendered
- These chunks support block placement, harvesting, physics

### Tier 1 (Simplified LOD)
- **Chunks**: Number of simplified visual chunks
- **Meshes**: Number of InstancedMesh objects (grouped by color)
- Background-generated by web workers
- Non-interactive, visual-only terrain

### Tier 2 (Billboards - Future)
- Not yet implemented
- Will use single sprites for ultra-distant chunks
- 1 draw call instead of 64 blocks per chunk

## Performance Impact

The debug overlay has minimal impact:
- Rings: 3 simple circle geometries
- Stats: DOM overlay (no 3D rendering)
- Update: Position sync every frame (trivial)

Turn off when not debugging for absolute maximum performance.

## Use Cases

1. **Visual Distance Tuning**: See if LOD chunks are too close/far
2. **Performance Testing**: Track chunk/block counts as you move
3. **Fog Adjustment**: Align fog with LOD boundaries
4. **Bug Diagnosis**: Verify chunks load/unload correctly
5. **Architecture Testing**: Validate ChunkRenderManager integration

## Implementation Details

**File**: `src/rendering/LODDebugOverlay.js`

**Integration Points**:
- VoxelWorld.js line 7048: Initialization
- VoxelWorld.js line 9397-9403: 'L' key toggle
- VoxelWorld.js line 8946-8949: Update loop

**Rendering**:
- Rings use `THREE.RingGeometry` with `MeshBasicMaterial`
- Transparent materials (60% opacity for Tier 0/1, 30% for Tier 2)
- `depthWrite: false` to avoid z-fighting
- Positioned 0.1 units above ground

## Future Enhancements

- [ ] Mouse hover tooltips showing chunk coordinates
- [ ] Color-coded chunk grid overlay
- [ ] FPS graph integration
- [ ] Click rings to adjust distances dynamically
- [ ] Export stats to CSV for analysis
- [ ] Heatmap showing chunk generation times
